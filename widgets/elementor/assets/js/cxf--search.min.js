"use strict";

window.addEventListener("elementor/frontend/init", function () {
  elementorFrontend.hooks.addAction(
    "frontend/element_ready/cxf--search.default",
    function (widget) {
      const searchWrapper = document.querySelector(".cxf--search-wrapper");
      const toggleOpen = document.querySelector(".cxf--search-open");
      const toggleClose = document.querySelector(".cxf--search-close");
      const inputField = document.querySelector("input");
      const searchForm = document.querySelector(".cxf--search-form");

      // Show search form.
      const openSearch = () => searchWrapper?.classList?.add("show-form");

      // Close search form.
      const closeSearch = () => searchWrapper?.classList?.remove("show-form");

      // Show input focus.
      const handleInputFocus = () =>
        searchForm?.classList?.add("cxf--search-form--focus");

      // Remove search form focus.
      const handleInputFocusOut = () =>
        searchForm?.classList?.remove("cxf--search-form--focus");

      // Actions.
      toggleOpen?.addEventListener("click", openSearch);
      toggleClose?.addEventListener("click", closeSearch);
      inputField.addEventListener("focus", handleInputFocus);
      inputField.addEventListener("focusout", handleInputFocusOut);
    }
  );
});
